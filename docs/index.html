<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Weekwise</title><style>* {
  box-sizing: border-box;
}
main {
  max-width: 20rem;
  margin: 0 auto;
}
label.blk {
  display: grid;
  grid-template-rows: auto 2rem;
}
label.blk input,
label.blk select {
  grid-row: 2/3;
}
input, select {
  border: thin solid currentColor;
  border-radius: .25rem;
  padding: .25rem .3rem;
}
.is-disab,
:disabled {
  color: lightgrey;
}
input[type="submit"] {
  height: 2rem;
  display: block;
  margin-inline-start: auto
}
form > *:not(:last-child) {
  margin-block-end: .5rem;
}
.grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
}
label input[type="radio"] {
  margin-inline-end: .5rem;
}
</style></head><body><main><h1>Generate a calendar</h1><form action="/g" id="form"><label class="blk">Start date<input type="date" name="s" value="2019-10-28"></label><div class="grid2"><label><input form="fakeForm" type="radio" name="method" checked id="opt-duration">Duration</label><label><input form="fakeForm" type="radio" name="method" id="opt-end">End Date</label></div><label class="blk js-duration">Duration<input class="js-duration" type="date" name="d" value="1" id="inp-dl"><select class="js-duration" name="du" id="inp-du"><option value="d">Day</option><option value="w" selected>Week</option><option value="m">Month</option></select></label><label class="blk js-end is-disab">End date<input class="js-end is-disab" type="date" name="e" disabled id="inp-end"></label><label class="blk">Week start<select name="ws"><option value="" selected>(Auto)</option><option value="1">Monday</option><option value="2">Tuesday</option><option value="3">Wednesday</option><option value="4">Thusday</option><option value="5">Friday</option><option value="6">Saturday</option><option value="0">Sunday</option></select></label><input type="submit" value="Generate"></form></main><script src="/dayjs.min.js"></script><script>const form = document.getElementById('form');
const url = new URL(window.location);
dest = url.pathname.split('/');
dest.pop();
form.action = [...dest, 'g'].join('/');
const start = document.getElementsByName('s')[0];
start.value = dayjs().format('YYYY-MM-DD');
const method = Array.from(document.getElementsByName('method'));
const durInputs = Array.from(document.getElementsByClassName('js-duration'));
const endInputs = Array.from(document.getElementsByClassName('js-end'));
const end = document.getElementById('inp-end');
const du = document.getElementById('inp-du');
const dl = document.getElementById('inp-dl');
const units = {
  d: 'days',
  w: 'weeks',
  m: 'months'
}
document.addEventListener('change', event => {
  if (method.indexOf(event.target) > -1) {
    if (document.getElementById('opt-duration').checked) {
      durInputs.forEach(e => {
        e.disabled = false
        e.classList.remove('is-disab')
      });
      endInputs.forEach(e => {
        e.disabled = true
        e.classList.add('is-disab')
      });
      end.value = "";
    } else {
      durInputs.forEach(e => {
        e.disabled = true
        e.classList.add('is-disab')
      });
      endInputs.forEach(e => {
        e.disabled = false
        e.classList.remove('is-disab')
      });
      if (end.value === "") end.value = dayjs(start.value).add(dl.value, units[du.value]).subtract(1, 'day').format('YYYY-MM-DD');
    }
  }
})</script></body></html>